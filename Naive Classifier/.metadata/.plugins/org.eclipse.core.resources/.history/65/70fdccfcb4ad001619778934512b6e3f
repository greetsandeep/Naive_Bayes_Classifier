package classifierbayesnaive;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;

public class Classifier {
	static ArrayList<Integer> trainLabels = new ArrayList<Integer>();
	static ArrayList<Integer> testLabels = new ArrayList<Integer>();
	static int [][]trainFaces = new int[451][4200];
	static int [][]testFaces = new int[150][4200];
	static HashMap<Integer, double[]> countTable = new HashMap<Integer,double[]>();
	public static void main(String args[]){
		try{
			inputLabelHandle("facedatatrainlabels",trainLabels);
		}catch(Exception e){
		}

		try{
			inputFaceHandle("facedatatrain",trainFaces);
		}catch(Exception e){
		}
		
		populateHashTable();
		trainFaces = null;trainLabels=null;
		
		try{
			inputLabelHandle("facedatatestlabels",testLabels);
		}catch(Exception e){
		}
		
		try{
			inputFaceHandle("facedatatrain",testFaces);
		}catch(Exception e){
		}
		
		naivePrediction();
		
	}
	public static void naivePrediction(){
		for(int i=0;i<testFaces.length;i++)
		{
			
		}
	}
	public static void populateHashTable(){
		for(int i = 0 ;i<4200;i++)
		{
			double temp[] = new double[4];
			countTable.put(i,temp);
		}
		for(int i=0;i<trainFaces[0].length;i++)
		{
			for(int j=0;j<trainFaces.length;j++)
			{
				if(trainFaces[j][i]==0 && trainLabels.get(j)==0)
					countTable.get(i)[0]++;
				else if(trainFaces[j][i]==0 && trainLabels.get(j)==1)
					countTable.get(i)[1]++;
				else if(trainFaces[j][i]==1 && trainLabels.get(j)==0)
					countTable.get(i)[2]++;
				else
					countTable.get(i)[3]++;
			}
		}
		for(int i=0;i<4200;i++)
		{
			double temp[] = countTable.get(i);
			countTable.get(i)[0] = temp[0]/(temp[0]+temp[2]);
			countTable.get(i)[1] = temp[1]/(temp[3]+temp[1]);
			countTable.get(i)[2] = temp[2]/(temp[0]+temp[2]);
			countTable.get(i)[3] = temp[3]/(temp[3]+temp[1]);
		}
	}
	public static void inputLabelHandle(String filename,ArrayList<Integer> labels)throws IOException {
		BufferedReader br = new BufferedReader(new FileReader(filename));
		String line=null;
		while( (line=br.readLine()) != null) {
			labels.add(Integer.parseInt(line));
		} 
		br.close();
	}
	public static void inputFaceHandle(String filename,int[][] faces)throws IOException {
		BufferedReader br = new BufferedReader(new FileReader(filename));
		String line=null;
		int linesRead = 0;
		int row=-1;
		int column = 0;
		while((line=br.readLine()) != null) {
			if(linesRead%70==0)
			{
				row++;
				column = 0;
			}
			for(int j =0;j<line.length();j++){
				if(line.charAt(j)=='#')
					faces[row][column]=1;
				else
					faces[row][column]=0;
				column++;
			}
			linesRead++;
		}
		br.close();
	}
}

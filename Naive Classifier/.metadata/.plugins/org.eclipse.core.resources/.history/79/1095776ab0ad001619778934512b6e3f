package classifierbayesnaive;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;

public class Classifier {
	static ArrayList<Integer> trainLabels = new ArrayList<Integer>();
	static ArrayList<Integer> testLabels = new ArrayList<Integer>();
	static int [][]trainFaces = new int[451][4200];
	static int [][]testFaces = new int[150][4200];
	static HashMap<Integer, int[]> countTable = new HashMap<Integer,int[]>();
	public static void main(String args[]){
		try{
			inputLabelHandle("facedatatrainlabels",trainLabels);
		}catch(Exception e){
		}

		try{
			inputFaceHandle("facedatatrain",trainFaces);
		}catch(Exception e){
		}
		
		populateHashTable();
		trainFaces = null;trainLabels=null;
		
		try{
			inputLabelHandle("facedatatestlabels",testLabels);
		}catch(Exception e){
		}
		
		try{
			inputFaceHandle("facedatatrain",testFaces);
		}catch(Exception e){
		}
		
		
		
	}
	public static void populateHashTable(){
		for(int i=0;i<trainFaces.length;i++)
		{
			int temp[] = new int[4];
			for(int j=0;j<trainFaces[i].length;j++)
			{
				if(trainFaces[i][j]==0 && trainLabels.get(i)==0)
					temp[0]++;
				else if(trainFaces[i][j]==0 && trainLabels.get(i)==1)
					temp[1]++;
				else if(trainFaces[i][j]==1 && trainLabels.get(i)==0)
					temp[2]++;
				else
					temp[3]++;
			}
			countTable.put(i,temp);
		}
	}
	public static void inputLabelHandle(String filename,ArrayList<Integer> labels)throws IOException {
		BufferedReader br = new BufferedReader(new FileReader(filename));
		String line=null;
		while( (line=br.readLine()) != null) {
			labels.add(Integer.parseInt(line));
		} 
		System.out.println(labels.size());
		br.close();
	}
	public static void inputFaceHandle(String filename,int[][] faces)throws IOException {
		BufferedReader br = new BufferedReader(new FileReader(filename));
		String line=null;
		int linesRead = 0;
		int row=-1;
		int column = 0;
		while((line=br.readLine()) != null) {
			if(linesRead%70==0)
			{
				row++;
				column = 0;
			}
			for(int j =0;j<line.length();j++){
				if(line.charAt(j)=='#')
					faces[row][column]=1;
				else
					faces[row][column]=0;
				column++;
			}
			linesRead++;
		}
		br.close();
	}
}
